<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# website: http://ogp.me/ns/website#">
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
	<meta name="description" content="">
	<meta property="og:title" content="Beta version of the HathiTrust Volumes API available">
	<link rel="icon" href="http://robotlibrarian.billdueber.com/" />
	
	
		<title>Robot Librarian | Beta version of the HathiTrust Volumes API available</title>
		<meta property="og:type" content="article">
		<meta property="article:published_time" content= 2009-12-15 >
	
	<meta property="og:description" content="">
	<meta property="og:url" content="http://robotlibrarian.billdueber.com/2009/12/beta-version-of-the-hathitrust-volumes-api-available/">
	<meta property="og:site_name" content="Robot Librarian">
	
	<meta name="generator" content="Hugo 0.24.1" />
   
	
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css">

	
	<link rel="stylesheet" href="http://robotlibrarian.billdueber.comcss/style.css">
	<link href="" rel="alternate" type="application/rss+xml" title="Robot Librarian" />
</head>
<nav class="navbar navbar-default navbar-fixed-top visible-xs">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
				<a class="navbar-brand" href="http://robotlibrarian.billdueber.com">Robot Librarian</a>
			
		</div>
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				
				
			</ul>
		</div>
	</div>
</nav>
<div class="container-fluid">
	<div class="row">
		<div id="menu" class="hidden-xs col-sm-4 col-md-3">
	<div id="particles-js"></div>
	<div id="menu-content" class="vertical-align">
		<img src="/images/robot_alpha.png" class="center-block" alt="Cheesy picture of robot">
		
			<h1 class="text-center"><a href="http://robotlibrarian.billdueber.com">Robot Librarian</a></h1>
		
		
		
			<small class="text-center center-block">Bill Dueber</small>
		
		
		
		<div id="social" class="text-center">
			<a href="https://twitter.com/billdueber" target="_blank"><i class="fa fa-twitter fa-2x"></i></a>
				
			
			
			
			<a href="https://github.com/https://github.com/billdueber" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
			
				
			<a href="mailto:bill@dueber.com" target="_blank"><i class="fa fa-envelope fa-2x"></i></a>			
		</div>
		<div id="links" class="text-center">
			
			
		</div>
	</div>
</div>


		<div id="content" class="col-xs-12 col-sm-8 col-md-9">
			<div class="row">
				<div id="post" class="col-sm-offset-1 col-sm-10 col-md-10 col-lg-8">

<main>
	<header>
		<div class="panel-header">
			<h1>Beta version of the HathiTrust Volumes API available
				
			</h1>
			<div class="panel-footer">
				
			</div>
			
		</div>
	</header>
	<br>
	<HR align=center>
	<article>
		

<h2 id="span-style-color-red-major-change-span"><span style="color: red">MAJOR CHANGE</span></h2>

<p>So, initially, this post listed that the way to separate multiple simultaneous requests was with a nice, URL-like slash (/) character.</p>

<p>Then, I remembered that LCCNs can have embedded slashes, e.g., 65063380//r85.</p>

<p>So, we&rsquo;re back to using pipe (|) characters to separate multiple calls &ndash; the examples below have been updated to reflect this.</p>

<h3 id="introduction">Introduction</h3>

<p>I&rsquo;ve put up a beta version of the HathiTrust Volumes API <a href="http://robotlibrarian.billdueber.com/thinking-through-a-simple-api-for-hathitrust-item-metadata/">previously discussed</a> on this blog and via email.</p>

<p>Currently, I&rsquo;ve only got json output, although there is space in there for other output formats as necessary.</p>

<h3 id="what-exactly-is-this">What exactly is this?</h3>

<p>Given: an identifier or set of identifiers, this API will
Return: a set of matched records and a sorted list of the items available in the HathiTrust.</p>

<p>Useful, for example, if you want to display HathiTrust holdings alongside your own in your OPAC.</p>

<h3 id="simple-single-value-call">Simple, single-value call</h3>

<p>Given the URL:</p>

<p><a href="http://catalog.hathitrust.org/api/volumes/oclc/15420548.json">http://catalog.hathitrust.org/api/volumes/oclc/15420548.json</a></p>

<p>You&rsquo;ll get the following back:</p>

<pre><code class="language-javascript">
  {
      &quot;records&quot;:
      {
          &quot;000791709&quot;:
          {
              &quot;recordURL&quot;:&quot;http://catalog.hathitrust.org/Record/000791709&quot;,
              &quot;titles&quot;:
              [
                  &quot;\&quot;Zhong gong dang shi\&quot; fu dao /&quot;,
                  &quot;\u300a\u4e2d\u5171\u515a\u53f2\u300b\u8f85\u5bfc /&quot;
              ],
              &quot;isbns&quot;: [],
              &quot;issns&quot;: [],
              &quot;oclcs&quot;: [&quot;15420548&quot;],
              &quot;lccns&quot;: []
          }
      },
      &quot;items&quot;:
      [
          {
              &quot;orig&quot;:&quot;University of Michigan&quot;,
              &quot;fromRecord&quot;:&quot;000791709&quot;,
              &quot;htid&quot;:&quot;mdp.39015058510069&quot;,
              &quot;itemURL&quot;:&quot;http://hdl.handle.net/2027/mdp.39015058510069&quot;,
              &quot;rightsCode&quot;:&quot;ic&quot;,
              &quot;lastUpdate&quot;:&quot;00000000&quot;,
              &quot;enumcron&quot;:false
          }
      ]
  }  

</code></pre>

<p>Note that the &lsquo;records&rsquo; are keyed on the local umid, also available in the &lsquo;fromRecord&rsquo; field of each item.</p>

<p>The generic short form is:</p>

<pre><code>http://catalog.hathitrust.org/api/volumes/(idtype)/id.(outputtype)
</code></pre>

<p>Right now the valid idtypes are:</p>

<ul>
<li>issn (will be normalized to just digits, no leading zeros)</li>
<li>isbn (will be normalized to an ISBN-13)</li>
<li>oclc (will be normalized to all digits, no leading zeros)</li>
<li>lccn (will be normalized <a href="http://www.loc.gov/marc/lccn-namespace.html#syntax">as recommended</a>)</li>
<li>htid (HathiTrust item id, seen above as &ldquo;mdp.39015058510069&rdquo;)</li>
<li>umid (the University of Michigan record ID, seen above in the &ldquo;fromRecord&rdquo; field of an item)</li>
</ul>

<p>Currently the only valid outputtype is &lsquo;json&rsquo;.</p>

<h3 id="more-complex-multi-valued-call">More complex, multi-valued call</h3>

<p>The full API URL is [this]</p>

<p><a href="http://catalog.hathitrust.org/api/volumes/json/id:1;oclc:45678;lccn:70628581|id:2;isbn:1591581613">http://catalog.hathitrust.org/api/volumes/json/id:1;oclc:45678;lccn:70628581|id:2;isbn:1591581613</a></p>

<p>This is a request for data on two separate items, identified on the calling end as simply &lsquo;1&rsquo; and &lsquo;2&rsquo; (id:1 and id:2). The first item is searched for using both an oclc number and an lccn; the second supplies only an isbn.</p>

<p>Note that</p>

<ul>
<li>The output format (json) has moved to appear right after the &lsquo;/volumes/&rsquo;</li>
<li>There&rsquo;s an arbitrary &lsquo;id&rsquo; field. This will be used to index the return values, so use something meaningful on your end.</li>
<li>keys and values are separated by colons. Key-Value pairs are separated by semi-colons.</li>
<li>Separate requests are separated by &lsquo;/&rsquo; in the URL, allowing you to request data for an arbitrary number of items with a single call.</li>
<li>Return values are</li>
<li>Matches follow the &ldquo;#3&rdquo; option on <a href="http://robotlibrarian.billdueber.com/thinking-through-a-simple-api-for-hathitrust-item-metadata/">the old post</a>, the
&ldquo;Must match if present&rdquo; option &ndash; basically, if you supply an identifier and a record has one of those identifiers, they must match.</li>
</ul>

<p>So, in the example, the first request has both an oclc number and an lccn. Matches are as follows:</p>

<ul>
<li>If a record has an oclc number but no lccn, its oclc number must match the passed oclc number.</li>
<li>If a record has an lccn but no oclc number, its lccn must match the passed lccn value.</li>
<li>If a record has both an lccn and an oclc number, both its identifiers must match the passed values.</li>
</ul>

<p>The returned structure is keyed on the arbitrary id passed in the search string (if not present, the whole search string will be used instead):</p>

<pre><code class="language-javascript">
  {
      &quot;1&quot;:
      {
          &quot;records&quot;:
          {
              &quot;001474331&quot;:
              {
                  &quot;recordURL&quot;:&quot;http://catalog.hathitrust.org/Record/001474331&quot;,
                  &quot;titles&quot;:
                  [&quot;Some aspects of seventeenth-century medicine &amp;amp; science; papers read at a Clark Library seminar, October 12, 1968&quot;],
                  &quot;isbns&quot;: [],
                  &quot;issns&quot;: [],
                  &quot;oclcs&quot;: [&quot;00045678&quot;],
                  &quot;lccns&quot;: [&quot;70628581 //r86&quot;]
              }
          },
          &quot;items&quot;:
          [{
                  &quot;orig&quot;:&quot;University of Michigan&quot;,
                  &quot;fromRecord&quot;:&quot;001474331&quot;,
                  &quot;htid&quot;:&quot;mdp.39015004074095&quot;,
                  &quot;itemURL&quot;:&quot;http://hdl.handle.net/2027/mdp.39015004074095&quot;,
                  &quot;rightsCode&quot;:&quot;ic&quot;,
                  &quot;lastUpdate&quot;:&quot;20090713&quot;,
                  &quot;enumcron&quot;:false
              }]
      },
      &quot;2&quot;:
      {
          &quot;records&quot;:
          {
              &quot;004370624&quot;:
              {
                  &quot;recordURL&quot;:&quot;http://catalog.hathitrust.org/Record/004370624&quot;,
                  &quot;titles&quot;:
                  [&quot;ARBA in-depth. Philosophy and religion /&quot;],
                  &quot;isbns&quot;:
                  [&quot;1591581613&quot;],
                  &quot;issns&quot;: [],
                  &quot;oclcs&quot;: [&quot;53462174&quot;],
                  &quot;lccns&quot;: [&quot;2003065945&quot;]
              }
          },
          &quot;items&quot;:
          [{
                  &quot;orig&quot;:&quot;University of Michigan&quot;,
                  &quot;fromRecord&quot;:&quot;004370624&quot;,
                  &quot;htid&quot;:&quot;mdp.39015058261911&quot;,
                  &quot;itemURL&quot;:&quot;http://hdl.handle.net/2027/mdp.39015058261911&quot;,
                  &quot;rightsCode&quot;:&quot;ic&quot;,
                  &quot;lastUpdate&quot;:&quot;20090907&quot;,
                  &quot;enumcron&quot;:false
           }]
      }
  }

</code></pre>

<h3 id="enumeration-chronology">Enumeration / Chronology</h3>

<p>An effort is made to return items in &ldquo;enumcron order&rdquo; &ndash; hopefully, with earlier volumes showing up before later volumes.</p>

<p>The full enumcron is listed in the items if you need to try something different.</p>

<h3 id="jsonp-support">JSONP Support</h3>

<p><a href="http://niryariv.wordpress.com/2009/05/05/jsonp-quickly/">JSONP</a> output is supported &ndash; just throw a &lsquo;&amp;callback=blahblahblah&rsquo; on the end of the URL you call and you&rsquo;ll get a function definition back.</p>

<p>Some examples:</p>

<p><a href="http://catalog.hathitrust.org/api/volumes/oclc/15420548.json&amp;amp;callback=myfunc">http://catalog.hathitrust.org/api/volumes/oclc/15420548.json&amp;callback=myfunc</a></p>

<p><a href="http://catalog.hathitrust.org/api/volumes/json/id:1;oclc:45678;lccn:70628581|id:2;isbn:1591581613&amp;amp;callback=myfunc">http://catalog.hathitrust.org/api/volumes/json/id:1;oclc:45678;lccn:70628581|id:2;isbn:1591581613&amp;callback=myfunc</a></p>

	</article>
	<br>
	
</main>
	


						<br>
						<section id="footer">
							<div class="text-center center-block">
								<ul class="copyright">
									<li>&copy; 2017 <a target="_blank" href="http://robotlibrarian.billdueber.com"></a> | Powered by <a target="_blank" href="https://gohugo.io/">Gohugo</a> | Theme <a target="_blank" href="https://git.pofilo.fr/pofilo/hugo-fatboy">Fatboy</a></li>
								</ul>
							</div>
						</section>
					</div>
				</div>
			</div>
		</div>
	</div>
  
  
	
  
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.2/js/bootstrap.min.js"></script>

	

	

	

	

	
	</body>
</html>





